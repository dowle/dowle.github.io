---
title: "PHP的自动加载"
date: 2020-08-12T16:07:40+08:00
tags: ["PHP"]
categories: ["PHP"]
draft: false
---
## 自动加载
尝试加载未定义的类。  
最原始的加载方式是手动include类文件，但是在类文件很多时，比较繁琐不够智能，所以PHP提供了自动加载类的机制。可以通过__autoload()魔术方法和register_autoload_function()方法来处理类的自动加载。  

## 两者的区别  
1. __autoload只能注册一个，而register_autoload_function可以注册多个
2. __autoload在php7.2中已被抛弃

## 使用方法
- __autoload  
```php
// 自动加载，php7.2后被抛弃
function __autoload($className) {
    // 通过一定的规则定位到文件路径并加载
    $fileName = $className . ".php";
    include $fileName;
}
```
- register_autoload_function  
```php
// 定义加载类
class AutoLoader
{

    public static function load(string $className)
    {
        // 通过一定的规则定位到文件路径并加载
        $fileName = $className . ".php";
        include $fileName;
    }
}

// 注册加载
spl_autoload_register("AutoLoader::load");
```