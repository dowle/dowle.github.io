---
title: "使用hugo+github搭建博客网站"
date: 2020-07-08T18:26:13+08:00
tags: ["github", "hugo"]
categories: ["其他"]
draft: false
---
## 使用hugo
[doc](https://gohugo.io/documentation/)
#### 安装
1. 这里采用github包的方式，[下载地址](https://github.com/gohugoio/hugo/releases)  
2. 将hugo加入环境变量中  
3. 验证是否成功
    ```
    hugo version
    ```  
#### 初始化项目
```
hugo new site 项目名
cd 项目
git init
```

#### 使用主题
1. 添加主题子模块
    ```
    git submodule add https://github.com/flysnow-org/maupassant-hugo themes/maupassant
    ```
2. 使用主题  
在config.toml中配置 theme = maupassant  

#### 创建文件
```
hugo new post/文章.md
```
则会创建 content/post/文章.md 文件

#### 本地服务
```
hugo server
```

#### 打包静态资源
```
hugo
```

## 使用github部署项目
#### 创建github项目
1. 可以是blog，则后面访问url为: http://用户名.github.io/blog
2. 可以是用户名.github.io, 则后面访问的url为: http://用户名.github.io

#### pages服务
1. 创建gh-pages分支，用于存放静态资源
2. 在github上开启设置pages服务, settings->options->github pages->选择分支

#### actions配置ci
github的ci/cd工具，提交代码后触发动作，用来完成部署工作。  

main.yaml
```yaml
# 工作流名
name: github pages deploy
# 触发条件
on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

# 任务
jobs:
  # 一个部署pages的任务
  deloy-pages:
    # 运行runner
    runs-on: ubuntu-latest

    # 执行步骤
    steps:
    # checkout仓库，才能进行后续操作
    - name: checkout 
      uses: actions/checkout@v2

    # hugo生成静态文件
    - name: hugo-setup
      uses: peaceiris/actions-hugo@v2.4.12
    - name: hugo-build
      run: hugo

    # 部署pages
    - name: deploy-pages
      uses: peaceiris/actions-gh-pages@v3.6.1
      with:
        publish_branch: gh-pages
        publish_dir: public
        github_token: ${{ secrets.GITHUB_TOKEN }}

```

如文件描述： 
1. 定义一个工作流名
2. 定义触发工作流的条件
3. 定义工作流的任务s
4. 定义一个部署任务  
  * 定义执行环境
  * 定义需要执行的步骤s  
    1. checkout仓库代码，并更新submodule
    2. 加入hugo环境
    3. 执行hugo命令，编译静态资源文件
    4. 部署pages（将代码提交到指定分支）  

然后测试在master上提交，检查是否能自动部署